(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(28)},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=a(2),s=a(4),u=a.n(s),l=a(10),d=a(11),f=a(3),p=a(12),m=function(e){return localStorage.setItem("favorites",JSON.stringify(e))},v=Object(n.createContext)(),E={episodes:[],favorites:function(e){var t=localStorage.getItem("favorites");return t?JSON.parse(t):[]}()},h=function(e,t){var a;switch(t.type){case"ADD_FAVORITE":return a=[].concat(Object(p.a)(e.favorites),[t.payload]),m(a),Object(f.a)({},e,{favorites:a});case"FETCH_EPISODES":return Object(f.a)({},e,{episodes:t.payload});case"REMOVE_FAVORITE":return a=e.favorites.filter(function(e){return e!==t.payload}),m(a),Object(f.a)({},e,{favorites:a});default:return e}},b=v,O=function(e){var t=e.children,a=Object(n.useContext)(b),o=a.state,c=a.dispatch,s=function(){var e=Object(l.a)(u.a.mark(function e(){var t,a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o.episodes.length>0)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=5,fetch("https://api.tvmaze.com/singlesearch/shows?q=futurama&embed=episodes");case 5:return t=e.sent,e.next=8,t.json();case 8:return a=e.sent,n={type:"FETCH_EPISODES",payload:a._embedded.episodes},e.abrupt("return",c(n));case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){s()}),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("div",null,r.a.createElement("h1",null,"Futurama"),r.a.createElement("p",null,"Pick your favorite episodes")),r.a.createElement("ul",{className:"navigation"},r.a.createElement("li",null,r.a.createElement(i.a,{to:"/"},"All Episodes")),r.a.createElement("li",null,r.a.createElement(i.a,{to:"/favorites"},o.favorites.length," Favorite(s)")))),t)},g=function(e){var t=e.data,a=e.favorite,o=Object(n.useContext)(b),c=o.state,i=o.dispatch,s=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=e.toString();a.length<t;)a="0".concat(a);return a};return r.a.createElement("section",{className:function(){var e=["episode-box"];return a&&e.push("episode-favorite"),e.join(" ")}()},r.a.createElement("img",{src:t.image.medium,alt:"Futurama episode: ".concat(t.name)}),r.a.createElement("div",null,t.name),r.a.createElement("section",{className:"episode-details"},r.a.createElement("div",null,"S".concat(s(t.season),"E").concat(s(t.number))),r.a.createElement("button",{type:"button",onClick:function(){return function(e){var t={payload:e};return c.favorites.includes(e)?t.type="REMOVE_FAVORITE":t.type="ADD_FAVORITE",i(t)}(t.id)}},a?"UnFavorite":"Add Favorite")))},y=function(e){var t=e.episodes,a=e.favorites;return r.a.createElement("section",{className:"episode-layout"},t.map(function(e){return r.a.createElement(g,{data:e,favorite:(t=e.id,a.find(function(e){return e===t})),key:e.id});var t}),";")},j=function(){var e=Object(n.useContext)(b).state;return r.a.createElement(i.b,null,r.a.createElement(O,{path:"/"},r.a.createElement(y,{path:"/",episodes:e.episodes,favorites:e.favorites}),r.a.createElement(y,{path:"/favorites",episodes:0===e.episodes.length?[]:e.favorites.map(function(t){return e.episodes.find(function(e){return e.id===t})}),favorites:e.favorites})))},F=(a(27),r.a.createElement(function(e){var t=Object(n.useReducer)(h,E),a=Object(d.a)(t,2),o={state:a[0],dispatch:a[1]};return r.a.createElement(v.Provider,{value:o},e.children)},null,r.a.createElement(j,null)));c.a.render(F,document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.288d6895.chunk.js.map